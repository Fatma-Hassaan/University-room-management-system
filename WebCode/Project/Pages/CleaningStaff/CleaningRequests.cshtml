@page
@model Project.Pages.CleaningStaff.Cleaning_RequestsModel
@{
    ViewData["Title"] = "Cleaning Requests";
}

<h2>Cleaning Requests</h2>

@if (Model.CleaningRequestsTable.Rows.Count == 0)
{
    <p>No pending or in-progress cleaning requests found.</p>
}
else
{
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>Request ID</th>
            <th>Room ID</th>
            <th>Condition</th>
            <th>Date</th>
            <th>Time</th> <!-- Make sure there's a column for Time -->
            <th>Requested By</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        @foreach (System.Data.DataRow row in Model.CleaningRequestsTable.Rows)
        {
        <tr>
            <td>@row["ID"]</td>
            <td>@row["RoomID"]</td>
            <td>@row["Condition"]</td>
            <td>@Convert.ToDateTime(row["RequestDate"]).ToShortDateString()</td>
            <td>@((TimeSpan)row["RequestTime"])</td>
            <td>@row["RequestorName"]</td>
            <td>
                <form method="post" asp-page-handler="MarkAsDone">
                    <input type="hidden" name="requestId" value="@row["ID"]" />
                    <button type="submit" class="btn btn-success">Mark as Done</button>
                </form>
            </td>
        </tr>
        }

        </tbody>
    </table>
}
