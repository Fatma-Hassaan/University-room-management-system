@page
@model Project.Pages.Admin.StatsModel
@{
    ViewData["Title"] = "Statistics";
}

<h2>@ViewData["Title"]</h2>
<div class="row">
    <div class="col-md-6">
        <canvas id="userDistributionChart" width="400" height="400"></canvas>
    </div>
    <div class="col-md-6">
        <canvas id="requestStatusChart" width="400" height="400"></canvas>
    </div>
</div>

@* Make sure your _Layout.cshtml has @RenderSection("Scripts", required: false) *@
@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // 1) Parse the chart JSON (use Raw so it isn't HTML-encoded)
        const userChartConfig = @Html.Raw(Model.UserDistributionChartJson);
        const reqChartConfig = @Html.Raw(Model.RequestStatusChartJson);

        // 2) Get each canvas context
        const ctxUser = document.getElementById('userDistributionChart').getContext('2d');
        const ctxReq = document.getElementById('requestStatusChart').getContext('2d');

        // 3) Instantiate
        new Chart(ctxUser, userChartConfig);
        new Chart(ctxReq, reqChartConfig); // <-- oops: typo! Should be reqChartConfig
        //                           ^^^^^^^^ Replace with reqChartConfig
    </script>
}
