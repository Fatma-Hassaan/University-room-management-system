@page
@model Project.Pages.RoomServicesTeam.QuotasModel
@{
    ViewData["Title"] = "Quota Requests";
    ViewData["CustomNavbar"] = "RoomSearch";
}

<div class="container mt-5">
    <h3 class="mb-4">Quota Requests</h3>

    @if (Model.QuotaRequests.Rows.Count == 0)
    {
        <p>No quota extension requests found.</p>
    }
    else
    {
        <table class="table table-bordered">
            <thead class="table-success">
                <tr>
                    <th>Request #</th>
                    <th>User ID</th>
                    <th>User Type</th>
                    <th>Extra Hours</th>
                    <th>Reason</th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach (System.Data.DataRow row in Model.QuotaRequests.Rows)
                {
                    <tr>
                        <td>@row["ID"]</td>
                        <td>@row["UserID"]</td>
                        <td>@row["UserType"]</td>
                        <td>@row["ExtraHours"]</td>
                        <td>@row["Reason"]</td>
                        <td>@row["Status"]</td>
                        <td>
                            <form method="post" asp-page-handler="SetStatus" class="d-inline">
                                <input type="hidden" name="requestId" value="@row["ID"]" />
                                <input type="hidden" name="status" value="Approved" />
                                <button class="btn btn-success btn-sm">Approve</button>
                            </form>
                            <form method="post" asp-page-handler="SetStatus" class="d-inline ms-1">
                                <input type="hidden" name="requestId" value="@row["ID"]" />
                                <input type="hidden" name="status" value="Rejected" />
                                <button class="btn btn-danger btn-sm">Reject</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>
